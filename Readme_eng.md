# **Chatbot with SQLite, LangChain and Hugging Face**

## **1\. Introduction**

This project implements a chatbot capable of interpreting natural language questions, accessing information from a SQLite database, and returning clear and friendly answers.  
The application combines the power of Hugging Face Language Models with LangChain orchestration, allowing user questions to be translated into SQL queries and the results presented in natural Portuguese.

## **2\. Problem Solved**

This project enables querying a SQLite database, automatically translating questions into SQL, and reformulating the responses in natural language, making the user experience more intuitive and user-friendly.

## **3\. Problem-Solving Approach**

1. ### **Database (SQLite)**

   * Creation of the example.db database with the clientes table (fields: id, nome, email, cidade).

   * Insertion of sample records: Ana Silva, Bruno Souza, and Carla Mendes.

2. ### **Hugging Face Authentication**

   * Use of an access token (HF\_TOKEN) to download and run pre-trained models.

3. **Model Loading**

   * Model used: Mistral-7B-Instruct via Hugging Face.

   * Memory optimizations: 4-bit quantization and automatic CPU/GPU offload.

   * Creation of a text-generation pipeline configured for short, deterministic, and consistent responses.  
       
4. **LangChain Integration**

   * Connection between the language model and the SQLite database.

   * Construction of an SQLDatabaseChain that allows converting questions in Portuguese into SQL queries.

5. **Question Function**

   * IImplementation of the perguntar() function, which:  
     * Executes the query on the database.

     * Formats the raw result.

     * Asks the model to rephrase the response in natural Portuguese.

6. **Interactive Loop**

   * Terminal-based interface allowing the user to type questions freely.

   * The chatbot responds naturally, and the command sair ends the conversation.

## **4\. Project Structure**

â”œâ”€â”€ example.db                           \# SQLite database with the clients table    
â”œâ”€â”€ chatbot\_sqlite\_langchain.ipynb       \# Main notebook with the code  
â””â”€â”€ README.md                            \# Project explanation

## **5\. Technologies Used**

* **Python** 

* **SQLite3** â†’ lightweight relational database.

* **Pandas** â†’ data manipulation and visualization.

* **Hugging Face Transformers** â†’ language models (Mistral-7B-Instruct).

* **LangChain** â†’ integration between LLMs and databases.

* **Bitsandbytes** â†’ model quantization and optimization.

* **Accelerate** â†’ execution across different hardware (CPU/GPU).

## **6\. Usage Examples**

**User question:**

ðŸ§‘ You: Which clients live in SÃ£o Paulo?

**SQL query generated by LangChain**

SELECT \* FROM clientes WHERE cidade \= 'SÃ£o Paulo';

**Chatbotâ€™s final answer:**

ðŸ¤– Bot: The clients who live in SÃ£o Paulo are: Ana Silva.

Another example

ðŸ§‘ You: What is Carla Mendesâ€™ email?  
ðŸ¤– Bot: Carla Mendesâ€™ email is carla@email.com.

## **7\. Results**

The chatbot successfully interpreted Portuguese questions and correctly generated the corresponding SQL queries. Responses were presented in natural language, providing a smooth and intuitive experience. Moreover, the architecture proved efficient even on limited hardware due to model quantization

## **8\. Next Steps**

* Add a graphical interface with Streamlit or Gradio.

* Expand the database for more complex scenarios.

* Test other language models (LLaMA 2, Falcon, etc.).

* Implement authentication and access control for sensitive queries.

* Enable conversation logging for later analysis.

